{"ast":null,"code":"import _slicedToArray from\"/Users/whl/ironhack/dating-apes/dating-apes/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext}from'react';import axios from'axios';import{Link,useNavigate}from'react-router-dom';import{AuthContext}from'../context/auth.context';import Navbar from'../components/Navbar';import TextInputField from'../components/forms/TextInputField';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var navigate=useNavigate();var _useContext=useContext(AuthContext),storeToken=_useContext.storeToken,verifyStoredToken=_useContext.verifyStoredToken;var handleEmail=function handleEmail(e){return setEmail(e.target.value);};var handlePassword=function handlePassword(e){return setPassword(e.target.value);};var handleLoginSubmit=function handleLoginSubmit(e){e.preventDefault();var requestBody={email:email,password:password};axios.post(\"/auth/login\",requestBody).then(function(response){storeToken(response.data.authToken);verifyStoredToken().then(function(){navigate('/users');});}).catch(function(error){var errorDescription=error.response.data.message;setErrorMessage(errorDescription);});};return/*#__PURE__*/_jsxs(\"div\",{style:{fontFamily:'Quicksand'},children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"form\",{className:\"Signup-9-Login\",onSubmit:handleLoginSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Let's find someone for your pet \\xA0 \\u0669(^\\u1D17^)\\u06F6 \"}),/*#__PURE__*/_jsx(TextInputField,{name:\"email\",label:\"Email\",type:\"email\",value:email,onChange:handleEmail,required:\"required\"}),/*#__PURE__*/_jsx(TextInputField,{name:\"password\",label:\"Password\",type:\"password\",value:password,onChange:handlePassword,required:\"required\"}),/*#__PURE__*/_jsx(\"div\",{className:\"main-info-input\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-hover\",style:{borderRadius:'30px',marginTop:'1.5vh'},type:\"submit\",children:\"LOGIN\"})})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsxs(\"div\",{className:\"Login-bottom-text\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Don't you have an account yet?\\xA0\\xA0\\xA0\"}),/*#__PURE__*/_jsx(Link,{to:'/signup',children:\" SIGN UP\"})]})]});}export default LoginPage;","map":{"version":3,"names":["useState","useContext","axios","Link","useNavigate","AuthContext","Navbar","TextInputField","LoginPage","props","email","setEmail","password","setPassword","undefined","errorMessage","setErrorMessage","navigate","storeToken","verifyStoredToken","handleEmail","e","target","value","handlePassword","handleLoginSubmit","preventDefault","requestBody","post","then","response","data","authToken","catch","error","errorDescription","message","fontFamily","borderRadius","marginTop"],"sources":["/Users/whl/ironhack/dating-apes/dating-apes/client/src/pages/LoginPage.js"],"sourcesContent":["import { useState, useContext } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/auth.context';\nimport Navbar from '../components/Navbar';\nimport TextInputField from '../components/forms/TextInputField';\n\nfunction LoginPage(props) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState(undefined);\n  const navigate = useNavigate();\n  const { storeToken, verifyStoredToken } = useContext(AuthContext);\n  const handleEmail = (e) => setEmail(e.target.value);\n  const handlePassword = (e) => setPassword(e.target.value);\n  const handleLoginSubmit = (e) => {\n    e.preventDefault();\n    const requestBody = { email, password };\n\n    axios\n      .post(`/auth/login`, requestBody)\n      .then((response) => {\n        storeToken(response.data.authToken);\n        verifyStoredToken().then(() => {\n          navigate('/users');\n        });\n      })\n      .catch((error) => {\n        const errorDescription = error.response.data.message;\n        setErrorMessage(errorDescription);\n      });\n  };\n\n  return (\n    <div style={{ fontFamily: 'Quicksand' }}>\n      <Navbar />\n      <form className='Signup-9-Login' onSubmit={handleLoginSubmit}>\n        <h3>Let's find someone for your pet &nbsp; ٩(^ᴗ^)۶ </h3>\n        <TextInputField name='email' label='Email' type='email' value={email} onChange={handleEmail} required='required' />\n        <TextInputField name='password' label='Password' type='password' value={password} onChange={handlePassword} required='required' />\n        <div className='main-info-input'>\n          <button className='btn-hover' style={{ borderRadius: '30px', marginTop: '1.5vh' }} type='submit'>\n            LOGIN\n          </button>\n        </div>\n      </form>\n      {errorMessage && <p className='error-message'>{errorMessage}</p>}\n      <div className='Login-bottom-text'>\n        <p>Don't you have an account yet?&nbsp;&nbsp;&nbsp;</p>\n        <Link to={'/signup'}> SIGN UP</Link>\n      </div>\n    </div>\n  );\n}\n\nexport default LoginPage;\n"],"mappings":"wIAAA,OAASA,QAAT,CAAmBC,UAAnB,KAAqC,OAArC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,OAASC,WAAT,KAA4B,yBAA5B,CACA,MAAOC,OAAP,KAAmB,sBAAnB,CACA,MAAOC,eAAP,KAA2B,oCAA3B,C,wFAEA,QAASC,UAAT,CAAmBC,KAAnB,CAA0B,CACxB,cAA0BT,QAAQ,CAAC,EAAD,CAAlC,wCAAOU,KAAP,eAAcC,QAAd,eACA,eAAgCX,QAAQ,CAAC,EAAD,CAAxC,yCAAOY,QAAP,eAAiBC,WAAjB,eACA,eAAwCb,QAAQ,CAACc,SAAD,CAAhD,yCAAOC,YAAP,eAAqBC,eAArB,eACA,GAAMC,SAAQ,CAAGb,WAAW,EAA5B,CACA,gBAA0CH,UAAU,CAACI,WAAD,CAApD,CAAQa,UAAR,aAAQA,UAAR,CAAoBC,iBAApB,aAAoBA,iBAApB,CACA,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAACC,CAAD,QAAOV,SAAQ,CAACU,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAApB,CACA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,CAACH,CAAD,QAAOR,YAAW,CAACQ,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAAvB,CACA,GAAME,kBAAiB,CAAG,QAApBA,kBAAoB,CAACJ,CAAD,CAAO,CAC/BA,CAAC,CAACK,cAAF,GACA,GAAMC,YAAW,CAAG,CAAEjB,KAAK,CAALA,KAAF,CAASE,QAAQ,CAARA,QAAT,CAApB,CAEAV,KAAK,CACF0B,IADH,eACuBD,WADvB,EAEGE,IAFH,CAEQ,SAACC,QAAD,CAAc,CAClBZ,UAAU,CAACY,QAAQ,CAACC,IAAT,CAAcC,SAAf,CAAV,CACAb,iBAAiB,GAAGU,IAApB,CAAyB,UAAM,CAC7BZ,QAAQ,CAAC,QAAD,CAAR,CACD,CAFD,EAGD,CAPH,EAQGgB,KARH,CAQS,SAACC,KAAD,CAAW,CAChB,GAAMC,iBAAgB,CAAGD,KAAK,CAACJ,QAAN,CAAeC,IAAf,CAAoBK,OAA7C,CACApB,eAAe,CAACmB,gBAAD,CAAf,CACD,CAXH,EAYD,CAhBD,CAkBA,mBACE,aAAK,KAAK,CAAE,CAAEE,UAAU,CAAE,WAAd,CAAZ,wBACE,KAAC,MAAD,IADF,cAEE,cAAM,SAAS,CAAC,gBAAhB,CAAiC,QAAQ,CAAEZ,iBAA3C,wBACE,oFADF,cAEE,KAAC,cAAD,EAAgB,IAAI,CAAC,OAArB,CAA6B,KAAK,CAAC,OAAnC,CAA2C,IAAI,CAAC,OAAhD,CAAwD,KAAK,CAAEf,KAA/D,CAAsE,QAAQ,CAAEU,WAAhF,CAA6F,QAAQ,CAAC,UAAtG,EAFF,cAGE,KAAC,cAAD,EAAgB,IAAI,CAAC,UAArB,CAAgC,KAAK,CAAC,UAAtC,CAAiD,IAAI,CAAC,UAAtD,CAAiE,KAAK,CAAER,QAAxE,CAAkF,QAAQ,CAAEY,cAA5F,CAA4G,QAAQ,CAAC,UAArH,EAHF,cAIE,YAAK,SAAS,CAAC,iBAAf,uBACE,eAAQ,SAAS,CAAC,WAAlB,CAA8B,KAAK,CAAE,CAAEc,YAAY,CAAE,MAAhB,CAAwBC,SAAS,CAAE,OAAnC,CAArC,CAAmF,IAAI,CAAC,QAAxF,mBADF,EAJF,GAFF,CAYGxB,YAAY,eAAI,UAAG,SAAS,CAAC,eAAb,UAA8BA,YAA9B,EAZnB,cAaE,aAAK,SAAS,CAAC,mBAAf,wBACE,iEADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAE,SAAV,sBAFF,GAbF,GADF,CAoBD,CAED,cAAeP,UAAf"},"metadata":{},"sourceType":"module"}